<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.springframework.org/schema/webflow
                          http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

	<input name="id" />
	<decision-state id="createOrEdit">
		<if test="id == null" then="create" else="edit" />
	</decision-state>

	<action-state id="create">
		<evaluate expression="evaluacionBean" result="flowScope.evaluacion" />
		<transition to="evaluacion_entrar_datos" />
	</action-state>

<action-state id="edit">
<evaluate expression="evaluacionService.getEvaluacionById(id)"
result="flowScope.evaluacion" />
<transition to="evaluacion_entrar_datos" />
</action-state>

	<!-- Datos generales de la evaluacion: de que curso es, por ejemplo. -->
	<view-state id="evaluacion_entrar_datos" model="evaluacion" view="evaluaciones_add">
		<transition on="submit" to="evaluacion_revisar_evaluacion"/>
		<transition on="agregar_pregunta" to="evaluacion_nueva_pregunta"/>
		<transition on="cancelar" to="evaluacion_cancelada" bind="false"/>
	</view-state>
	<!-- Formulario de nueva pregunta: de que tipo quiere la pregunta -->
	<view-state id="evaluacion_nueva_pregunta">
		<transition on="colocar_texto" to="evaluacion_texto_pregunta"/>
	</view-state>
	<view-state id="evaluacion_texto_pregunta">
		<transition on="finalizar" to="evaluacion_entrar_datos"/>
	</view-state>
	<view-state id="evaluacion_revisar_evaluacion">
		<transition on="finalizar" to="evaluacion_confirmada"/>
		<transition on="volver" to="evaluacion_entrar_datos"/>
		<transition on="cancelar" to="evaluacion_cancelada"/>
	</view-state>
	
	<end-state id="evaluacion_confirmada"/>
	<end-state id="evaluacion_cancelada"/>

</flow>